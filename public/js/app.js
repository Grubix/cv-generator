!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("anime"),require("utils")):"function"==typeof define&&define.amd?define(["anime","utils"],t):(e=e||self).app=t(e.anime,e.utils)}(this,(function(e,t){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;class i{constructor(e="info",t="toast content",i){this.type=e,this.content=t;Object.assign(this,{showDuration:400,hideDuration:400,timeout:6e3,extendedTimeout:2e3,typeIcon:!0,closeButton:!0,autohide:!0,userselectNone:!0,onshow:()=>{},onhide:()=>{}},i)}createDOM(){let e,s;this.typeIcon&&(e=t.el("div.toast-type",t.el("i."+i.settings.icons[this.type]))),this.closeButton&&(s=t.el("div.toast-close",t.el("i.toast-close-icon."+i.settings.icons.close,{onclick:()=>this.hide()}))),this.dom=t.el("div.toast",{dataset:{toastType:this.type},role:"dialog",ontouchstart:()=>this.hide()},[t.el("div.toast-content",[e,t.el("div.toast-text",{style:{userSelect:this.userselectNone?"none":"initial"}},this.content),s]),this.progressBar=t.el("div.toast-progress")])}show(){if(this.createDOM(),i.container.parentNode!==document.body&&document.body.append(i.container),i.container.append(this.dom),e({targets:this.dom,duration:this.showDuration,easing:"easeOutCubic",height:[0,this.dom.offsetHeight],opacity:[0,1],complete:()=>{this.dom.style.height=null,this.onshow()}}),this.progressBarAnimation=e({targets:this.progressBar,duration:this.showDuration+this.timeout,autoplay:this.autohide,easing:"linear",width:["100%",0],complete:()=>this.hide()}),i.stack.length+1>i.settings.maxStack)for(let e=0;e<i.stack.length-i.settings.maxStack+1;e++)i.stack[e].hide();i.stack.push(this)}hide(){e({targets:this.dom,duration:this.hideDuration,opacity:0,left:"-10%",easing:"easeOutCubic",complete:()=>{i.remove(this),this.onhide(),this.progressBarAnimation&&(this.progressBarAnimation.pause(),delete this.progressBarAnimation)}})}static show(e,t,s){(e instanceof i?e:new i(e,t,s)).show()}static remove(e){const t=i.stack.indexOf(e);t>-1&&i.stack.splice(t,1),e.dom&&(i.container.removeChild(e.dom),delete e.dom),0==i.stack.length&&i.container.parentNode===document.body&&document.body.removeChild(i.container)}static hideAll(){[...i.stack].forEach(e=>e.hide())}}i.container=t.el("div.toast-stack",{onmouseenter:()=>{i.stack.forEach(t=>{t.autohide&&(e.set(t.progressBar,{width:"100%"}),t.progressBarAnimation&&(t.progressBarAnimation.pause(),delete t.progressBarAnimation))})},onmouseleave:()=>{i.stack.forEach(t=>{t.autohide&&(t.progressBarAnimation=e({targets:t.progressBar,duration:t.extendedTimeout,easing:"linear",width:["100%",0]}),t.progressBarAnimation.finished.then(()=>t.hide()))})}}),i.stack=[],i.settings={maxStack:3,icons:{info:"ic-message-circle",success:"ic-check",warning:"ic-alert-triangle",error:"ic-alert-circle",option:"ic-help-circle",close:"ic-x"}};return new class{constructor(){this.skills=[],this.interests=[],this.employmentHistory=[],this.educationHistory=[],this.baseDataInputs={name:t.id("js-basedata-name"),lastname:t.id("js-basedata-lastname"),birthDate:t.id("js-basedata-birth-date"),phoneNumber:t.id("js-basedata-phone-number"),email:t.id("js-basedata-email"),streetAndHouseNumber:t.id("js-basedata-street-and-house-number"),townAndZipCode:t.id("js-basedata-town-and-zipcode"),rodo:t.id("js-basedata-rodo"),githubLink:t.id("js-basedata-github")},this.userImage=t.id("js-user-image"),this.skillsContainer=t.id("js-skills"),this.interestsContainer=t.id("js-interests"),this.employmentHistoryContainer=t.id("js-employment-history"),this.educationHistoryContainer=t.id("js-education-history");const i=t.id("js-user-name"),s=t.id("js-user-lastname"),o=t.id("js-image-upload-input");t.on(["input","paste"],this.baseDataInputs.name,(function(){i.innerText=this.value})),t.on(["input","paste"],this.baseDataInputs.lastname,(function(){s.innerText=this.value})),t.on("change",o,()=>{o.files.length>0&&this.uploadImage(o.files[0])}),t.on("click",t.id("js-skills-add-btn"),()=>this.addSkills()),t.on("click",t.id("js-interests-add-btn"),()=>this.addInterests()),t.on("click",t.id("js-employment-add-btn"),()=>this.addEmploymentHistory()),t.on("click",t.id("js-education-add-btn"),()=>this.addEducationHistory()),t.on("click",t.id("js-save-btn"),()=>!this.saving&&this.saveData()),t.ajax({method:"get",url:"/cv-generator/get-data",returnType:"json"}).then(i=>{i.data.base&&Object.keys(i.data.base).forEach(e=>{this.baseDataInputs[e]&&(this.baseDataInputs[e].value=i.data.base[e])}),i.data.skills&&i.data.skills.forEach(e=>{this.addSkills().value=e}),i.data.interests&&i.data.interests.forEach(e=>{this.addInterests().value=e}),i.data.employmentHistory&&i.data.employmentHistory.forEach(e=>{const t=this.addEmploymentHistory();t.period.value=e.period,t.title.value=e.title,t.description.value=e.description}),i.data.educationHistory&&i.data.educationHistory.forEach(e=>{const t=this.addEducationHistory();t.period.value=e.period,t.title.value=e.title,t.description.value=e.description});const s=t.id("js-loading-overlay");e({targets:s,duration:300,easing:"linear",opacity:[1,0],complete:()=>{s.style.display="none"}})})}moveUp(e){const t=e.parentNode;0==Array.from(t.children).indexOf(e)?t.insertBefore(e,t.lastChild.nextSibling):t.insertBefore(e,e.previousSibling)}addSkills(){let e;const i=t.el("div.row",[e=t.el("input.form-control",{type:"text",placeholder:"Skills"}),t.el("div.row__delete-icon",{onclick:()=>{this.skills.splice(this.skills.indexOf(e),1),this.skillsContainer.removeChild(i)}},t.el("i.ic-x")),t.el("div.row__move-icon",{onclick:()=>this.moveUp(i)},t.el("i.ic-arrow-up"))]);return this.skills.push(e),this.skillsContainer.appendChild(i),e}addInterests(){let e;const i=t.el("div.row",[e=t.el("input.form-control",{type:"text",placeholder:"Interests"}),t.el("div.row__delete-icon",{onclick:()=>{this.interests.splice(this.interests.indexOf(e),1),this.interestsContainer.removeChild(i)}},t.el("i.ic-x")),t.el("div.row__move-icon",{onclick:()=>this.moveUp(i)},t.el("i.ic-arrow-up"))]);return this.interests.push(e),this.interestsContainer.appendChild(i),e}addEmploymentHistory(){const e={},i=t.el("div.row.row--history",[t.el("div",{style:{flex:1}},[t.el("div.row",[e.period=t.el("input.form-control.col--1-3",{placeholder:"Perdiod"}),e.title=t.el("input.form-control.col--2-3",{placeholder:"Title"})]),e.description=t.el("textarea.form-control.form-control--textarea",{placeholder:"Description"})]),t.el("div.row__delete-icon",{onclick:()=>{this.employmentHistory.splice(this.employmentHistory.indexOf(e),1),this.employmentHistoryContainer.removeChild(i)}},t.el("i.ic-x")),t.el("div.row__move-icon",{onclick:()=>this.moveUp(i)},t.el("i.ic-arrow-up"))]);return this.employmentHistory.push(e),this.employmentHistoryContainer.appendChild(i),e}addEducationHistory(){const e={},i=t.el("div.row.row--history",[t.el("div",{style:{flex:1}},[t.el("div.row",[e.period=t.el("input.form-control.col--1-3",{placeholder:"Perdiod"}),e.title=t.el("input.form-control.col--2-3",{placeholder:"Title"})]),e.description=t.el("textarea.form-control.form-control--textarea",{placeholder:"Description"})]),t.el("div.row__delete-icon",{onclick:()=>{this.educationHistory.splice(this.educationHistory.indexOf(e),1),this.educationHistoryContainer.removeChild(i)}},t.el("i.ic-x")),t.el("div.row__move-icon",{onclick:()=>this.moveUp(i)},t.el("i.ic-arrow-up"))]);return this.educationHistory.push(e),this.educationHistoryContainer.appendChild(i),e}saveData(){this.saving=!0;const e={};Object.keys(this.baseDataInputs).forEach(t=>{e[t]=this.baseDataInputs[t].value});const s=this.skills.filter(e=>e.value.length>0).map(e=>e.value),o=this.interests.filter(e=>e.value.length>0).map(e=>e.value),a=this.employmentHistory.filter(e=>e.title.value.length>0).map(e=>({period:e.period.value,title:e.title.value,description:e.description.value})),n=this.educationHistory.filter(e=>e.title.value.length>0).map(e=>({period:e.period.value,title:e.title.value,description:e.description.value}));t.ajax({method:"post",url:"/cv-generator/save-data",returnType:"json",data:{base:e,skills:s,interests:o,employmentHistory:a,educationHistory:n,token:window.csrf}}).then(e=>{this.saving=!1,e.success?i.show("success",e.success):e.error&&i.show("error",e.error)})}uploadImage(e){const s=new FormData;s.append("imageFile",e),t.ajax({method:"post",url:"/cv-generator/upload-image",returnType:"json",data:s,headers:null}).then(e=>{e.data?this.userImage.src=e.data:e.error&&i.show("error",e.error)})}}}));
//# sourceMappingURL=maps/app.js.map
