!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("utils"),require("anime")):"function"==typeof define&&define.amd?define(["utils","anime"],e):(t=t||self).app=e(t.utils,t.anime)}(this,(function(t,e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;class i{constructor(t="info",e="toast content",i){this.type=t,this.content=e;Object.assign(this,{showDuration:400,hideDuration:400,timeout:6e3,extendedTimeout:2e3,typeIcon:!0,closeButton:!0,autohide:!0,userselectNone:!0,onshow:()=>{},onhide:()=>{}},i)}createDOM(){let e,s;this.typeIcon&&(e=t.el("div.toast-type",t.el("i."+i.settings.icons[this.type]))),this.closeButton&&(s=t.el("div.toast-close",t.el("i.toast-close-icon."+i.settings.icons.close,{onclick:()=>this.hide()}))),this.dom=t.el("div.toast",{dataset:{toastType:this.type},role:"dialog",ontouchstart:()=>this.hide()},[t.el("div.toast-content",[e,t.el("div.toast-text",{style:{userSelect:this.userselectNone?"none":"initial"}},this.content),s]),this.progressBar=t.el("div.toast-progress")])}show(){if(this.createDOM(),i.container.parentNode!==document.body&&document.body.append(i.container),i.container.append(this.dom),e({targets:this.dom,duration:this.showDuration,easing:"easeOutCubic",height:[0,this.dom.offsetHeight],opacity:[0,1],complete:()=>{this.dom.style.height=null,this.onshow()}}),this.progressBarAnimation=e({targets:this.progressBar,duration:this.showDuration+this.timeout,autoplay:this.autohide,easing:"linear",width:["100%",0],complete:()=>this.hide()}),i.stack.length+1>i.settings.maxStack)for(let t=0;t<i.stack.length-i.settings.maxStack+1;t++)i.stack[t].hide();i.stack.push(this)}hide(){e({targets:this.dom,duration:this.hideDuration,opacity:0,left:"-10%",easing:"easeOutCubic",complete:()=>{i.remove(this),this.onhide(),this.progressBarAnimation&&(this.progressBarAnimation.pause(),delete this.progressBarAnimation)}})}static show(t,e,s){(t instanceof i?t:new i(t,e,s)).show()}static remove(t){const e=i.stack.indexOf(t);e>-1&&i.stack.splice(e,1),t.dom&&(i.container.removeChild(t.dom),delete t.dom),0==i.stack.length&&i.container.parentNode===document.body&&document.body.removeChild(i.container)}static hideAll(){[...i.stack].forEach(t=>t.hide())}}i.container=t.el("div.toast-stack",{onmouseenter:()=>{i.stack.forEach(t=>{t.autohide&&(e.set(t.progressBar,{width:"100%"}),t.progressBarAnimation&&(t.progressBarAnimation.pause(),delete t.progressBarAnimation))})},onmouseleave:()=>{i.stack.forEach(t=>{t.autohide&&(t.progressBarAnimation=e({targets:t.progressBar,duration:t.extendedTimeout,easing:"linear",width:["100%",0]}),t.progressBarAnimation.finished.then(()=>t.hide()))})}}),i.stack=[],i.settings={maxStack:3,icons:{info:"ic-message-circle",success:"ic-check",warning:"ic-alert-triangle",error:"ic-alert-circle",option:"ic-help-circle",close:"ic-x"}};return new class{constructor(){this.skills=[],this.interests=[],this.employmentHistory=[],this.educationHistory=[],this.baseDataInputs={name:t.id("js-basedata-name"),lastname:t.id("js-basedata-lastname"),birthDate:t.id("js-basedata-birth-date"),phoneNumber:t.id("js-basedata-phone-number"),email:t.id("js-basedata-email"),streetAndHouseNumber:t.id("js-basedata-street-and-house-number"),townAndZipCode:t.id("js-basedata-town-and-zipcode"),rodo:t.id("js-basedata-rodo"),githubLink:t.id("js-basedata-github")},this.userImage=t.id("js-user-image"),this.skillsContainer=t.id("js-skills"),this.interestsContainer=t.id("js-interests"),this.employmentHistoryContainer=t.id("js-employment-history"),this.educationHistoryContainer=t.id("js-education-history");const i=t.id("js-user-name"),s=t.id("js-user-lastname"),o=t.id("js-image-upload-input");t.on(["input","paste"],this.baseDataInputs.name,(function(){i.innerText=this.value})),t.on(["input","paste"],this.baseDataInputs.lastname,(function(){s.innerText=this.value})),t.on("change",o,()=>{o.files.length>0&&this.uploadImage(o.files[0])}),t.on("click",t.id("js-skills-add-btn"),()=>this.addSkills()),t.on("click",t.id("js-interests-add-btn"),()=>this.addInterests()),t.on("click",t.id("js-employment-add-btn"),()=>this.addEmploymentHistory()),t.on("click",t.id("js-education-add-btn"),()=>this.addEducationHistory()),t.on("click",t.id("js-save-btn"),()=>!this.saving&&this.saveData()),t.ajax({method:"get",url:"/cv-generator/get-data",returnType:"json"}).then(i=>{i.data.base&&Object.keys(i.data.base).forEach(t=>{this.baseDataInputs[t]&&(this.baseDataInputs[t].value=i.data.base[t])}),i.data.skills&&i.data.skills.forEach(t=>{this.addSkills().value=t}),i.data.interests&&i.data.interests.forEach(t=>{this.addInterests().value=t}),i.data.employmentHistory&&i.data.employmentHistory.forEach(t=>{const e=this.addEmploymentHistory();e.period.value=t.period,e.title.value=t.title,e.description.value=t.description}),i.data.educationHistory&&i.data.educationHistory.forEach(t=>{const e=this.addEducationHistory();e.period.value=t.period,e.title.value=t.title,e.description.value=t.description});const s=t.id("js-loading-overlay");e({targets:s,duration:300,easing:"linear",opacity:[1,0],complete:()=>{s.style.display="none"}})})}addSkills(){let e;const i=t.el("div.row",[e=t.el("input.form-control",{type:"text",placeholder:"Skills"}),t.el("div.row__delete-icon",{onclick:()=>{this.skills.splice(this.skills.indexOf(e),1),this.skillsContainer.removeChild(i)}},t.el("i.ic-x"))]);return this.skills.push(e),this.skillsContainer.appendChild(i),e}addInterests(){let e;const i=t.el("div.row",[e=t.el("input.form-control",{type:"text",placeholder:"Interests"}),t.el("div.row__delete-icon",{onclick:()=>{this.interests.splice(this.interests.indexOf(e),1),this.interestsContainer.removeChild(i)}},t.el("i.ic-x"))]);return this.interests.push(e),this.interestsContainer.appendChild(i),e}addEmploymentHistory(){const e={},i=t.el("div.row.row--history",[t.el("div",{style:{flex:1}},[t.el("div.row",[e.period=t.el("input.form-control.col--1-3",{placeholder:"Perdiod"}),e.title=t.el("input.form-control.col--2-3",{placeholder:"Title"})]),e.description=t.el("textarea.form-control.form-control--textarea",{placeholder:"Description"})]),t.el("div.row__delete-icon",{onclick:()=>{this.employmentHistory.splice(this.employmentHistory.indexOf(e),1),this.employmentHistoryContainer.removeChild(i)}},t.el("i.ic-x"))]);return this.employmentHistory.push(e),this.employmentHistoryContainer.appendChild(i),e}addEducationHistory(){const e={},i=t.el("div.row.row--history",[t.el("div",{style:{flex:1}},[t.el("div.row",[e.period=t.el("input.form-control.col--1-3",{placeholder:"Perdiod"}),e.title=t.el("input.form-control.col--2-3",{placeholder:"Title"})]),e.description=t.el("textarea.form-control.form-control--textarea",{placeholder:"Description"})]),t.el("div.row__delete-icon",{onclick:()=>{this.educationHistory.splice(this.educationHistory.indexOf(e),1),this.educationHistoryContainer.removeChild(i)}},t.el("i.ic-x"))]);return this.educationHistory.push(e),this.educationHistoryContainer.appendChild(i),e}saveData(){this.saving=!0;const e={};Object.keys(this.baseDataInputs).forEach(t=>{e[t]=this.baseDataInputs[t].value});const s=this.skills.filter(t=>t.value.length>0).map(t=>t.value),o=this.interests.filter(t=>t.value.length>0).map(t=>t.value),a=this.employmentHistory.filter(t=>t.title.value.length>0).map(t=>({period:t.period.value,title:t.title.value,description:t.description.value})),n=this.educationHistory.filter(t=>t.title.value.length>0).map(t=>({period:t.period.value,title:t.title.value,description:t.description.value}));t.ajax({method:"post",url:"/cv-generator/save-data",returnType:"json",data:{base:e,skills:s,interests:o,employmentHistory:a,educationHistory:n,token:window.csrf}}).then(t=>{this.saving=!1,t.success?i.show("success",t.success):t.error&&i.show("error",t.error)})}uploadImage(e){const s=new FormData;s.append("imageFile",e),t.ajax({method:"post",url:"/cv-generator/upload-image",returnType:"json",data:s,headers:null}).then(t=>{t.data?this.userImage.src=t.data:t.error&&i.show("error",t.error)})}}}));
//# sourceMappingURL=maps/app.js.map
