{"version":3,"sources":["app.js"],"names":["global","factory","exports","module","require","define","amd","self","app","utils","anime","this","hasOwnProperty","Toast","[object Object]","type","content","options","Object","assign","showDuration","hideDuration","timeout","extendedTimeout","typeIcon","closeButton","autohide","userselectNone","onshow","onhide","el","settings","icons","close","onclick","hide","dom","dataset","toastType","role","ontouchstart","style","userSelect","progressBar","createDOM","container","parentNode","document","body","append","targets","duration","easing","height","offsetHeight","opacity","complete","progressBarAnimation","autoplay","width","stack","length","maxStack","i","push","left","remove","pause","show","toast","index","indexOf","splice","removeChild","forEach","t","onmouseenter","set","onmouseleave","finished","then","info","success","warning","error","option","skills","interests","employmentHistory","educationHistory","baseDataInputs","name","id","lastname","birthDate","phoneNumber","email","streetAndHouseNumber","townAndZipCode","rodo","githubLink","userImage","skillsContainer","interestsContainer","employmentHistoryContainer","educationHistoryContainer","userName","userLastname","imageUploadInput","on","innerText","value","files","uploadImage","addSkills","addInterests","addEmploymentHistory","addEducationHistory","saving","saveData","ajax","method","url","returnType","response","data","base","keys","key","inputs","period","title","description","loadingOverlay","display","input","row","placeholder","appendChild","flex","filter","map","token","window","csrf","file","formData","FormData","src","console","log"],"mappings":"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","file":"../app.js","sourcesContent":["import Toast from './components/toast.js';\r\nimport anime from 'anime';\r\nimport { id, el, on, ajax } from 'utils';\r\n\r\nclass App {\r\n    constructor() {\r\n        this.skills = [];\r\n        this.interests = [];\r\n        this.employmentHistory = [];\r\n        this.educationHistory = [];\r\n\r\n        this.baseDataInputs = {\r\n            name: id('js-basedata-name'),\r\n            lastname: id('js-basedata-lastname'),\r\n            birthDate: id('js-basedata-birth-date'),\r\n            phoneNumber: id('js-basedata-phone-number'),\r\n            email: id('js-basedata-email'),\r\n            streetAndHouseNumber: id('js-basedata-street-and-house-number'),\r\n            townAndZipCode: id('js-basedata-town-and-zipcode'),\r\n            rodo: id('js-basedata-rodo'),\r\n            githubLink: id('js-basedata-github')\r\n        };\r\n\r\n        this.userImage = id('js-user-image');\r\n        this.skillsContainer = id('js-skills');\r\n        this.interestsContainer = id('js-interests');\r\n        this.employmentHistoryContainer = id('js-employment-history');\r\n        this.educationHistoryContainer = id('js-education-history');\r\n\r\n        const userName = id('js-user-name');\r\n        const userLastname = id('js-user-lastname');\r\n        const imageUploadInput = id('js-image-upload-input');\r\n\r\n        on(['input', 'paste'], this.baseDataInputs.name, function() {\r\n            userName.innerText = this.value;\r\n        });\r\n\r\n        on(['input', 'paste'], this.baseDataInputs.lastname, function() {\r\n            userLastname.innerText = this.value;\r\n        });\r\n\r\n        on('change', imageUploadInput, () => {\r\n            if (imageUploadInput.files.length > 0) {\r\n                this.uploadImage(imageUploadInput.files[0]);\r\n            }\r\n        });\r\n\r\n        on('click', id('js-skills-add-btn'), () => this.addSkills());\r\n        on('click', id('js-interests-add-btn'), () => this.addInterests());\r\n        on('click', id('js-employment-add-btn'), () => this.addEmploymentHistory());\r\n        on('click', id('js-education-add-btn'), () => this.addEducationHistory());\r\n        on('click', id('js-save-btn'), () => !this.saving && this.saveData());\r\n\r\n        ajax({\r\n            method: 'get',\r\n            url: '/cv-generator/get-data',\r\n            returnType: 'json'\r\n        }).then(response => {\r\n            if (response.data.base) {\r\n                Object.keys(response.data.base).forEach(key => {\r\n                    if (this.baseDataInputs[key]) {\r\n                        this.baseDataInputs[key].value = response.data.base[key];\r\n                    }\r\n                });\r\n            }\r\n\r\n            if (response.data.skills) {\r\n                response.data.skills.forEach(el => {\r\n                    const input = this.addSkills();\r\n                    input.value = el;\r\n                });\r\n            }\r\n\r\n            if (response.data.interests) {\r\n                response.data.interests.forEach(el => {\r\n                    const input = this.addInterests();\r\n                    input.value = el;\r\n                });\r\n            }\r\n\r\n            if (response.data.employmentHistory) {\r\n                response.data.employmentHistory.forEach(el => {\r\n                    const inputs = this.addEmploymentHistory();\r\n                    inputs.period.value = el.period;\r\n                    inputs.title.value = el.title;\r\n                    inputs.description.value = el.description;\r\n                });\r\n            }\r\n\r\n            if (response.data.educationHistory) {\r\n                response.data.educationHistory.forEach(el => {\r\n                    const inputs = this.addEducationHistory();\r\n                    inputs.period.value = el.period;\r\n                    inputs.title.value = el.title;\r\n                    inputs.description.value = el.description;\r\n                });\r\n            }\r\n\r\n            const loadingOverlay = id('js-loading-overlay');\r\n\r\n            anime({\r\n                targets: loadingOverlay,\r\n                duration: 300,\r\n                easing: 'linear',\r\n                opacity: [1, 0],\r\n                complete: () => {\r\n                    loadingOverlay.style.display = 'none';\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    addSkills() {\r\n        let input;\r\n\r\n        const row = el('div.row', [\r\n            input = el('input.form-control', {\r\n                type: 'text',\r\n                placeholder: 'Skills'\r\n            }),\r\n            el('div.row__delete-icon', {\r\n                onclick: () => {\r\n                    this.skills.splice(this.skills.indexOf(input), 1);\r\n                    this.skillsContainer.removeChild(row);\r\n                }\r\n            }, el('i.ic-x'))\r\n        ]);\r\n\r\n        this.skills.push(input);\r\n        this.skillsContainer.appendChild(row);\r\n\r\n        return input;\r\n    }\r\n\r\n    addInterests() {\r\n        let input;\r\n\r\n        const row = el('div.row', [\r\n            input = el('input.form-control', {\r\n                type: 'text',\r\n                placeholder: 'Interests'\r\n            }),\r\n            el('div.row__delete-icon', {\r\n                onclick: () => {\r\n                    this.interests.splice(this.interests.indexOf(input), 1);\r\n                    this.interestsContainer.removeChild(row);\r\n                }\r\n            }, el('i.ic-x'))\r\n        ]);\r\n\r\n        this.interests.push(input);\r\n        this.interestsContainer.appendChild(row);\r\n\r\n        return input;\r\n    }\r\n\r\n    addEmploymentHistory() {\r\n        const inputs = {};\r\n\r\n        const row = el('div.row.row--history', [\r\n            el('div', {\r\n                style: {\r\n                    flex: 1\r\n                }\r\n            }, [\r\n                el('div.row', [\r\n                    inputs.period = el('input.form-control.col--1-3', {\r\n                        placeholder: 'Perdiod'\r\n                    }),\r\n                    inputs.title = el('input.form-control.col--2-3', {\r\n                        placeholder: 'Title'\r\n                    })\r\n                ]),\r\n                inputs.description = el('textarea.form-control.form-control--textarea', {\r\n                    placeholder: 'Description'\r\n                })\r\n            ]\r\n            ),\r\n            el('div.row__delete-icon', {\r\n                onclick: () => {\r\n                    this.employmentHistory.splice(this.employmentHistory.indexOf(inputs), 1);\r\n                    this.employmentHistoryContainer.removeChild(row);\r\n                }\r\n            }, el('i.ic-x'))\r\n        ]);\r\n\r\n        this.employmentHistory.push(inputs);\r\n        this.employmentHistoryContainer.appendChild(row);\r\n\r\n        return inputs;\r\n    }\r\n\r\n    addEducationHistory() {\r\n        const inputs = {};\r\n\r\n        const row = el('div.row.row--history', [\r\n            el('div', {\r\n                style: {\r\n                    flex: 1\r\n                }\r\n            }, [\r\n                el('div.row', [\r\n                    inputs.period = el('input.form-control.col--1-3', {\r\n                        placeholder: 'Perdiod'\r\n                    }),\r\n                    inputs.title = el('input.form-control.col--2-3', {\r\n                        placeholder: 'Title'\r\n                    })\r\n                ]),\r\n                inputs.description = el('textarea.form-control.form-control--textarea', {\r\n                    placeholder: 'Description'\r\n                })\r\n            ]\r\n            ),\r\n            el('div.row__delete-icon', {\r\n                onclick: () => {\r\n                    this.educationHistory.splice(this.educationHistory.indexOf(inputs), 1);\r\n                    this.educationHistoryContainer.removeChild(row);\r\n                }\r\n            }, el('i.ic-x'))\r\n        ]);\r\n\r\n        this.educationHistory.push(inputs);\r\n        this.educationHistoryContainer.appendChild(row);\r\n\r\n        return inputs;\r\n    }\r\n\r\n    saveData() {\r\n        this.saving = true;\r\n\r\n        const base = {};\r\n        Object.keys(this.baseDataInputs).forEach(key => {\r\n            base[key] = this.baseDataInputs[key].value;\r\n        });\r\n\r\n        const skills = this.skills.filter(el => el.value.length > 0).map(el => el.value);\r\n        const interests = this.interests.filter(el => el.value.length > 0).map(el => el.value);\r\n\r\n        const employmentHistory = this.employmentHistory\r\n            .filter(el => el.title.value.length > 0)\r\n            .map(el => ({\r\n                period: el.period.value,\r\n                title: el.title.value,\r\n                description: el.description.value\r\n            }));\r\n\r\n        const educationHistory = this.educationHistory\r\n            .filter(el => el.title.value.length > 0)\r\n            .map(el => ({\r\n                period: el.period.value,\r\n                title: el.title.value,\r\n                description: el.description.value\r\n            }));\r\n\r\n        ajax({\r\n            method: 'post',\r\n            url: '/cv-generator/save-data',\r\n            returnType: 'json',\r\n            data: {\r\n                base: base,\r\n                skills: skills,\r\n                interests: interests,\r\n                employmentHistory: employmentHistory,\r\n                educationHistory: educationHistory,\r\n                token: window.csrf\r\n            }\r\n        }).then(response => {\r\n            this.saving = false;\r\n\r\n            if (response.success) {\r\n                Toast.show('success', response.success);\r\n            } else if (response.error) {\r\n                Toast.show('error', response.error);\r\n            }\r\n        });\r\n    }\r\n\r\n    uploadImage(file) {\r\n        const formData = new FormData();\r\n        formData.append('imageFile', file);\r\n\r\n        ajax({\r\n            method: 'post',\r\n            url: '/cv-generator/upload-image',\r\n            returnType: 'json',\r\n            data: formData\r\n        }).then(response => {\r\n            if (response.data) {\r\n                this.userImage.src = response.data;\r\n            }\r\n            console.log(response);\r\n            // w response musi byc zwrocone url do zdjecia i potem ustawione w miniaturce\r\n        });\r\n    }\r\n}\r\n\r\nexport default new App();\r\n"]}